#include <Arduino.h>

#include "Time.h"

////////////////////////////////////////////////////////////////////////////////////////////////////
TimeClass::TimeClass() {
	_timestamp = 0;
	_millis = 0;
}

////////////////////////////////////////////////////////////////////////////////////////////////////
void TimeClass::update() {
	static unsigned long lastMillis = 0;

	unsigned long now = millis();
	unsigned long delay = now - lastMillis;

	_millis += delay;
	_timestamp += _millis / 1000;
	_millis %= 1000;

	lastMillis = now;
}

////////////////////////////////////////////////////////////////////////////////////////////////////
void TimeClass::set(unsigned long time, unsigned long ms) {
	_timestamp = time;
	_millis = ms;
}

////////////////////////////////////////////////////////////////////////////////////////////////////
unsigned long TimeClass::get() const {
	return _timestamp;
}
